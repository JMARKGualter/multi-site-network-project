HQ ROUTER 1

system-view
sysname R1
interface GigabitEthernet0/0/0
undo shutdown
quit
interface GigabitEthernet0/0/0.10
vlan-type dot1q 10
ip address 192.168.10.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.20
vlan-type dot1q 20
ip address 192.168.20.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.99
vlan-type dot1q 99
ip address 192.168.99.254 255.255.255.0
quit
interface GigabitEthernet0/0/1
ip address 10.0.12.1 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/2
ip address 10.0.13.1 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/3
ip address 10.0.23.1 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/4
ip address 10.0.24.1 255.255.255.252
mtu 1500
quit
ospf 1 router-id 1.1.1.1
area 0
network 192.168.10.0 0.0.0.31
network 192.168.20.0 0.0.0.31
network 192.168.99.0 0.0.0.255
network 10.0.12.0 0.0.0.3
network 10.0.13.0 0.0.0.3
network 10.0.23.0 0.0.0.3
network 10.0.24.0 0.0.0.3
quit
quit
save

BRANCH ROUTER 2 -----------------------------------------------------------------------
system-view
sysname R2
interface GigabitEthernet0/0/0
undo shutdown
quit
interface GigabitEthernet0/0/0.30
vlan-type dot1q 30
ip address 192.168.30.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.40
vlan-type dot1q 40
ip address 192.168.40.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.99
vlan-type dot1q 99
ip address 192.168.99.254 255.255.255.0
quit
interface GigabitEthernet0/0/1
ip address 10.0.12.2 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/2
ip address 10.0.13.2 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/3
ip address 10.0.34.1 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/4
ip address 10.0.35.1 255.255.255.252
mtu 1500
quit
ospf 1 router-id 2.2.2.2
area 0
network 192.168.30.0 0.0.0.31
network 192.168.40.0 0.0.0.31
network 192.168.99.0 0.0.0.255
network 10.0.12.0 0.0.0.3
network 10.0.13.0 0.0.0.3
network 10.0.34.0 0.0.0.3
network 10.0.35.0 0.0.0.3
quit
quit
acl number 3000
rule 5 deny ip source 192.168.30.0 0.0.0.31 destination 192.168.50.0 0.0.0.31
rule 10 deny ip source 192.168.30.0 0.0.0.31 destination 192.168.60.0 0.0.0.31
rule 15 deny ip source 192.168.40.0 0.0.0.31 destination 192.168.50.0 0.0.0.31
rule 20 deny ip source 192.168.40.0 0.0.0.31 destination 192.168.60.0 0.0.0.31
rule 25 permit ip
quit
interface GigabitEthernet0/0/3
traffic-filter outbound acl 3000
quit
interface GigabitEthernet0/0/4
traffic-filter outbound acl 3000
quit
save

BRANCH 2 ROUTER 3 ---------------------------------------------------------------------
system-view
sysname R3
interface GigabitEthernet0/0/0
undo shutdown
quit
interface GigabitEthernet0/0/0.50
vlan-type dot1q 50
ip address 192.168.50.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.60
vlan-type dot1q 60
ip address 192.168.60.1 255.255.255.224
quit
interface GigabitEthernet0/0/0.99
vlan-type dot1q 99
ip address 192.168.99.254 255.255.255.0
quit
interface GigabitEthernet0/0/1
ip address 10.0.23.2 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/2
ip address 10.0.24.2 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/3
ip address 10.0.34.2 255.255.255.252
mtu 1500
quit
interface GigabitEthernet0/0/4
ip address 10.0.35.2 255.255.255.252
mtu 1500
quit
ospf 1 router-id 3.3.3.3
area 0
network 192.168.50.0 0.0.0.31
network 192.168.60.0 0.0.0.31
network 192.168.99.0 0.0.0.255
network 10.0.23.0 0.0.0.3
network 10.0.24.0 0.0.0.3
network 10.0.34.0 0.0.0.3
network 10.0.35.0 0.0.0.3
quit
quit
acl number 3001
rule 5 deny ip source 192.168.50.0 0.0.0.31 destination 192.168.30.0 0.0.0.31
rule 10 deny ip source 192.168.50.0 0.0.0.31 destination 192.168.40.0 0.0.0.31
rule 15 deny ip source 192.168.60.0 0.0.0.31 destination 192.168.30.0 0.0.0.31
rule 20 deny ip source 192.168.60.0 0.0.0.31 destination 192.168.40.0 0.0.0.31
rule 25 permit ip
quit
interface GigabitEthernet0/0/3
traffic-filter outbound acl 3001
quit
interface GigabitEthernet0/0/4
traffic-filter outbound acl 3001
quit
save

HQ SWITCH 1 -----------------------------------------------------------------------------
system-view
sysname SW1
vlan batch 10 20 99
interface Vlanif99
ip address 192.168.99.1 255.255.255.0
quit
interface Ethernet0/0/1
port link-type access
port default vlan 10
quit
interface Ethernet0/0/3
port link-type access
port default vlan 10
quit
interface Ethernet0/0/5
port link-type access
port default vlan 10
quit
interface Ethernet0/0/7
port link-type access
port default vlan 10
quit
interface Ethernet0/0/9
port link-type access
port default vlan 10
quit
interface Ethernet0/0/11
port link-type access
port default vlan 10
quit
interface Ethernet0/0/13
port link-type access
port default vlan 10
quit
interface Ethernet0/0/15
port link-type access
port default vlan 10
quit
interface Ethernet0/0/17
port link-type access
port default vlan 10
quit
interface Ethernet0/0/19
port link-type access
port default vlan 10
quit
interface Ethernet0/0/2
port link-type access
port default vlan 20
quit
interface Ethernet0/0/4
port link-type access
port default vlan 20
quit
interface Ethernet0/0/6
port link-type access
port default vlan 20
quit
interface Ethernet0/0/8
port link-type access
port default vlan 20
quit
interface Ethernet0/0/10
port link-type access
port default vlan 20
quit
interface Ethernet0/0/12
port link-type access
port default vlan 20
quit
interface Ethernet0/0/14
port link-type access
port default vlan 20
quit
interface Ethernet0/0/16
port link-type access
port default vlan 20
quit
interface Ethernet0/0/18
port link-type access
port default vlan 20
quit
interface Ethernet0/0/20
port link-type access
port default vlan 20
quit
interface GigabitEthernet0/0/1
port link-type trunk
port trunk allow-pass vlan 10 20 99
quit
ip route-static 0.0.0.0 0.0.0.0 192.168.99.254
quit
save

BRANCH 1 SW2 ----------------------------------------------------------------------------
system-view
sysname SW2
vlan batch 30 40 99
interface Vlanif99
ip address 192.168.99.2 255.255.255.0
quit
interface Ethernet0/0/1
port link-type access
port default vlan 30
quit
interface Ethernet0/0/3
port link-type access
port default vlan 30
quit
interface Ethernet0/0/5
port link-type access
port default vlan 30
quit
interface Ethernet0/0/7
port link-type access
port default vlan 30
quit
interface Ethernet0/0/9
port link-type access
port default vlan 30
quit
interface Ethernet0/0/11
port link-type access
port default vlan 30
quit
interface Ethernet0/0/13
port link-type access
port default vlan 30
quit
interface Ethernet0/0/15
port link-type access
port default vlan 30
quit
interface Ethernet0/0/17
port link-type access
port default vlan 30
quit
interface Ethernet0/0/19
port link-type access
port default vlan 30
quit
interface Ethernet0/0/2
port link-type access
port default vlan 40
quit
interface Ethernet0/0/4
port link-type access
port default vlan 40
quit
interface Ethernet0/0/6
port link-type access
port default vlan 40
quit
interface Ethernet0/0/8
port link-type access
port default vlan 40
quit
interface Ethernet0/0/10
port link-type access
port default vlan 40
quit
interface Ethernet0/0/12
port link-type access
port default vlan 40
quit
interface Ethernet0/0/14
port link-type access
port default vlan 40
quit
interface Ethernet0/0/16
port link-type access
port default vlan 40
quit
interface Ethernet0/0/18
port link-type access
port default vlan 40
quit
interface Ethernet0/0/20
port link-type access
port default vlan 40
quit
interface GigabitEthernet0/0/1
port link-type trunk
port trunk allow-pass vlan 30 40 99
quit
ip route-static 0.0.0.0 0.0.0.0 192.168.99.254
quit
save

BRANCH 2 SW3 ----------------------------------------------------------------------------
system-view
sysname SW3
vlan batch 50 60 99
interface Vlanif99
ip address 192.168.99.3 255.255.255.0
quit
interface Ethernet0/0/1
port link-type access
port default vlan 50
quit
interface Ethernet0/0/3
port link-type access
port default vlan 50
quit
interface Ethernet0/0/5
port link-type access
port default vlan 50
quit
interface Ethernet0/0/7
port link-type access
port default vlan 50
quit
interface Ethernet0/0/9
port link-type access
port default vlan 50
quit
interface Ethernet0/0/11
port link-type access
port default vlan 50
quit
interface Ethernet0/0/13
port link-type access
port default vlan 50
quit
interface Ethernet0/0/15
port link-type access
port default vlan 50
quit
interface Ethernet0/0/17
port link-type access
port default vlan 50
quit
interface Ethernet0/0/19
port link-type access
port default vlan 50
quit
interface Ethernet0/0/2
port link-type access
port default vlan 60
quit
interface Ethernet0/0/4
port link-type access
port default vlan 60
quit
interface Ethernet0/0/6
port link-type access
port default vlan 60
quit
interface Ethernet0/0/8
port link-type access
port default vlan 60
quit
interface Ethernet0/0/10
port link-type access
port default vlan 60
quit
interface Ethernet0/0/12
port link-type access
port default vlan 60
quit
interface Ethernet0/0/14
port link-type access
port default vlan 60
quit
interface Ethernet0/0/16
port link-type access
port default vlan 60
quit
interface Ethernet0/0/18
port link-type access
port default vlan 60
quit
interface Ethernet0/0/20
port link-type access
port default vlan 60
quit
interface GigabitEthernet0/0/1
port link-type trunk
port trunk allow-pass vlan 50 60 99
quit
ip route-static 0.0.0.0 0.0.0.0 192.168.99.254
quit
save

